#!/bin/sh

HOST=192.168.1.18
NAS_VOL="volume1"
MOUNT_ROOT="/media"

usage () {
	cat <<EOF>&2
Usage: ${0##*/} FOLDER
       ${0##*/} -u FOLDER

Mount NFS resources from NAS.

Options:

  -h:  Show this help.
  -u:  Unmont resource

EOF
}

OPT_UNMOUNT=false
while getopts ":hu" opt; do
	case $opt in
	h)
		usage
		exit 1 ;;
	u)
		OPT_UNMOUNT=true ;;
	\?)
		usage
		exit 1 ;;
	esac
done

shift $((OPTIND -1))

if [ $# -eq 0 ]; then
	usage
	exit 1
fi

if [ ! -d "$MOUNT_ROOT/$1" ]; then
	 echo >&2 "'$MOUNT_ROOT/$1' does not exists"
   exit 1
fi

if $OPT_UNMOUNT; then
	sudo umount $MOUNT_ROOT/$1
else
	sudo mount.nfs $HOST:/$NAS_VOL/$1 $MOUNT_ROOT/$1 -o async,rw
fi
